# 🚀 Dify 应用发布指南

## 问题描述

当前错误：`API Error: 400 - Workflow not published`

这个错误表示 Dify 应用还没有发布，需要先在 Dify 控制台发布应用。

## 🔧 发布步骤

### 步骤 1: 登录 Dify 控制台

1. 访问 [Dify 控制台](https://cloud.dify.ai/)
2. 使用你的账号登录

### 步骤 2: 找到你的应用

1. 在应用列表中找到你的应用
2. 应用 ID: `79b14015-c5a2-4e34-b575-c69e702650c6`
3. 点击进入应用详情

### 步骤 3: 发布应用

1. 在应用详情页面，找到 "发布" 按钮
2. 点击 "发布" 按钮
3. 选择发布环境：
   - **开发环境**：适合日常开发和测试
   - **生产环境**：适合正式部署（更稳定）
4. 确认发布

> 💡 **提示**：开发环境和生产环境都可以正常使用，选择你当前使用的环境即可。

### 步骤 4: 验证发布状态

1. 发布完成后，应用状态应该显示为 "已发布"
2. 复制应用的 API 密钥和端点信息
3. 确认配置正确

## 📋 配置检查清单

请确认以下配置：

- [ ] 应用已发布（开发环境或生产环境均可）
- [ ] API 密钥正确：`app-EF0oHmInk30U17B9xX29YXaU`
- [ ] API 端点正确：`https://api.dify.ai/v1`
- [ ] 应用 ID 正确：`79b14015-c5a2-4e34-b575-c69e702650c6`

## 🔍 常见问题

### 问题 1: 找不到发布按钮

**解决方案：**

1. 确保你有应用的编辑权限
2. 检查应用是否已经配置完成
3. 联系应用管理员

### 问题 2: 发布失败

**解决方案：**

1. 检查应用配置是否有错误
2. 确认所有必要的组件都已配置
3. 查看错误日志

### 问题 3: API 调用仍然失败

**解决方案：**

1. 等待几分钟让发布生效
2. 重新部署云函数
3. 清除小程序缓存

## 🎯 发布成功标志

发布成功后，你应该能看到：

- ✅ 应用状态显示 "已发布"
- ✅ API 调用不再返回 "Workflow not published" 错误
- ✅ 小程序能够正常发送消息并收到回复

## 📞 需要帮助？

如果按照上述步骤仍然有问题：

1. 检查 Dify 控制台的错误日志
2. 确认应用配置是否正确
3. 联系 Dify 技术支持
4. 检查网络连接

## 🚀 下一步

发布成功后：

1. 重新部署 `dify-chat` 云函数
2. 测试小程序功能
3. 验证聊天功能是否正常

发布应用后，你的小程序就能正常使用 Dify AI 聊天功能了！
